<h1>Assignment 6</h1>
<h3>by TJ Holt</h3>

<form style="width:25%; margin-top:30px;">
    <fieldset>
        <legend>New Row</legend>
        Name:
        <input type="text" id="uName" required /><br />
        Reps:
        <input type="number" id="uReps" required /><br />
        Weight:
        <input type="number" id="uWeight" required /><br />
        date:
        <input type="date" id="uDate" required /><br />
        unit:
        <select id="uUnit" required>
            <option [ngValue]="true">lbs</option>
            <option [ngValue]="false">kg</option>
        </select><br />
    </fieldset>
    <input type="submit" onclick="dataCheck()" />
</form>

{{param}}
<script>
    function dataCheck()
    {
        // Create the url to POST the weather info in JSON format.                                      
        var payload = {};
        payload.reset = false;
        payload.workout_name = document.getElementById('uName').value.toLowerCase();
        payload.workout_reps = document.getElementById('uReps').value.toLowerCase();
        payload.workout_weight = document.getElementById('uWeight').value.toLowerCase();
        payload.workout_date = document.getElementById('uDate').value.toLowerCase();
        payload.workout_unit = document.getElementById('uUnit').value.toLowerCase();

        var url = 'http://flip3.engr.oregonstate.edu:6329/insert';

        var req = new XMLHttpRequest();
        req.open('POST', url, true);
        req.setRequestHeader('Content-Type', 'application/json');
        req.addEventListener('load',
            function ()                                                                                  
            {
                if (req.status >= 200 && req.status <= 400)                                            
                {
                    //response = JSON.parse(req.responseText);                                          
                    window.location.href = "/workout";
                }
                else                                                                                    
                {
                    console.log('Error in network request: ' + req.statusText);
                }
            }
        );
        req.send(JSON.stringify(payload));
    }
</script>